[global]
module  = UserTask     ; Job uses user written scripts
backend = local       ; Submit to local batch system
workdir = /nfs/dust/cms/user/kovalch/GRID-CONTROL_JOBS/Trees_80X/TopMass/pseudoexperiments/work.topmass_newPU_3_checknoHLTPU_variation_161018

[local]
wms = SGE
;qsubArg = -l distro="sld6"
qsub args = -w e -l os=sld6 -R y
[jobs]
wall time  = 2:50
memory     = 1900
max retry  = 3
monitor    = dashboard
;jobs         = 1

[UserTask]
executable  = /afs/desy.de/user/k/kovalch/xxl/af-cms/CMSSW_8_1_0_pre6/src/TopMass/Analyzer/runTopMass.sh
input files = /afs/desy.de/user/k/kovalch/xxl/af-cms/CMSSW_8_1_0_pre6/src/TopMass/Analyzer/TopMass  
	      /afs/desy.de/user/k/kovalch/xxl/af-cms/CMSSW_8_1_0_pre6/src/TopMass/Analyzer/Configuration_LeptonJets.conf
arguments  = -t pe -i @INPUT@ -M 172.5 -J 1.0 -W 50 -c @LEPTON@ -w @WEIGHT@ --seed @MY_JOBID@ --constrainJSF true ;--constrainJSFsigma @JSFSIGMA@
;arguments  = -t pe -i @INPUT@ -M 172.5 -J 1. -W 150 -c @LEPTON@ --seed @MY_JOBID@ --weight @WEIGHT@ ;--fsig 1.0
;arguments  = -t pe -i @INPUT@ -M 172.5 -J 1. -W 50 -c @LEPTON@ --seed @MY_JOBID@ --weight @WEIGHT@ ;--fsig 1.0

;root path  = /afs/desy.de/products/root/amd64_rhel50/5.34.00
[storage]
se path           = dir:///nfs/dust/cms/user/kovalch/GRID-CONTROL_JOBS/Trees_80X/TopMass/pseudoexperiments/topmass_newPU_3_checknoHLTPU_variation_161018
se output files   = ensemble.root
;se output pattern = @JSFSIGMA@/@LEPTON@/weight_@NAME@/job_@MY_JOBID@_@X@
;se output pattern = syst/@SCALEID@/@LEPTON@/weight_@WEIGHTNAME@/job_@MY_JOBID@_@X@
se output pattern = syst/@LEPTON@/weight_@WEIGHTNAME@/job_@MY_JOBID@_@X@

[parameters]
repeat     = 10

;parameters = (NAME, WEIGHT) LEPTON JSFSIGMA
parameters = (WEIGHTNAME , WEIGHT) LEPTON INPUT; SCALEID  

;(NAME, WEIGHT) = 
(WEIGHTNAME , WEIGHT) =
    ("puDef_new","weight.combinedWeight")
    ("puUp_new",         "weight.combinedWeight/weight.puWeight*weight.puWeightUp")
    ("puDown_new",       "weight.combinedWeight/weight.puWeight*weight.puWeightDown")
   ; ("topPt",	     "weight.combinedWeight*((top.decayChannel<0)?1:weight.topPtSysWeight)")
    ;("doubleBG" , "weight.combinedWeight*((top.decayChannel<0)?2:1)")
    ;("noBG" , "weight.combinedWeight*((top.decayChannel<0)?0:1)")
    ;("bTagWeight_bTagSFUp","weight.combinedWeight/weight.bTagWeight*weight.bTagWeight_bTagSFUp")
    ;("bTagWeight_bTagSFDown","weight.combinedWeight/weight.bTagWeight*weight.bTagWeight_bTagSFDown")
    ;("bTagWeight_bTagCjetSFUp","weight.combinedWeight/weight.bTagWeight*weight.bTagWeight_bTagCjetSFUp")
    ;("bTagWeight_bTagCjetSFDown","weight.combinedWeight/weight.bTagWeight*weight.bTagWeight_bTagCjetSFDown")
    ;("bTagWeight_misTagSFUp","weight.combinedWeight/weight.bTagWeight*weight.bTagWeight_misTagSFUp")
    ;("bTagWeight_misTagSFDown","weight.combinedWeight/weight.bTagWeight*weight.bTagWeight_misTagSFDown")
   ; ("bJESWeight_fNuUp","weight.combinedWeight*weight.bJESWeight_fNuUp")
   ; ("bJESWeight_fNuDown","weight.combinedWeight*weight.bJESWeight_fNuDown")
   ; ("bJESWeight_fragHard","weight.combinedWeight/weight.bJESWeight_frag*weight.bJESWeight_fragHard")
   ; ("bJESWeight_fragSoft","weight.combinedWeight/weight.bJESWeight_frag*weight.bJESWeight_fragSoft")
   ; ("lepIDWeightUp","weight.combinedWeight/weight.lepIDWeight*weight.lepIDWeightUp")
   ; ("lepIDWeightDown","weight.combinedWeight/weight.lepIDWeight*weight.lepIDWeightDown")
   ; ("isoWeightUp","weight.combinedWeight/weight.isoWeight*weight.isoWeightUp")
   ; ("isoWeightDown","weight.combinedWeight/weight.isoWeight*weight.isoWeightDown")
   ; ("triggerWeightUp","weight.combinedWeight/weight.triggerWeight*weight.triggerWeightUp")
   ; ("triggerWeightDown","weight.combinedWeight/weight.triggerWeight*weight.triggerWeightDown")

   ; ("default","weight.combinedWeight")

   ; ("scaledWidthLHEEventWeight_forA_S_@SCALEID@" , "weight.combinedWeight*((top.decayChannel<0)?(1):(weight.lheWeight[@SCALEID@]/weight.lheWeight[0]))")
   ;  ("scaledWidthLHEEventWeight_forPDF_@SCALEID@" , "weight.combinedWeight*((top.decayChannel<0)?(1):(weight.lheWeight[@SCALEID@]/weight.lheWeight[0]))")
     
     ;("UE_fullTune","weight.combinedWeight/((top.decayChannel<0)?(1):(5.36606-1.79280*TMath::Log((top.pfCandidateChPtToward[0]+top.pfCandidateChPtAway[0]+top.pfCandidateChPtTransverse[0])/3.)+0.168736*TMath::Log((top.pfCandidateChPtToward[0]+top.pfCandidateChPtAway[0]+top.pfCandidateChPtTransverse[0])/3.)*TMath::Log((top.pfCandidateChPtToward[0]+top.pfCandidateChPtAway[0]+top.pfCandidateChPtTransverse[0])/3.)))")
     ;("UE_halfTune","weight.combinedWeight*0.5*(1.+1./((top.decayChannel<0)?(1):(5.36606-1.79280*TMath::Log((top.pfCandidateChPtToward[0]+top.pfCandidateChPtAway[0]+top.pfCandidateChPtTransverse[0])/3.)+0.168736*TMath::Log((top.pfCandidateChPtToward[0]+top.pfCandidateChPtAway[0]+top.pfCandidateChPtTransverse[0])/3.)*TMath::Log((top.pfCandidateChPtToward[0]+top.pfCandidateChPtAway[0]+top.pfCandidateChPtTransverse[0])/3.))))")


    ;(frag,         "weight.combinedWeight*weight.bJESWeight_frag")
    ;(fragHard,     "weight.combinedWeight*weight.bJESWeight_fragHard")
    ;(fragSoft,     "weight.combinedWeight*weight.bJESWeight_fragSoft")
    ;(fNuUp,        "weight.combinedWeight*weight.bJESWeight_fNuUp")
    ;(fNuDown,      "weight.combinedWeight*weight.bJESWeight_fNuDown")
    ;(topPt,        "weight.combinedWeight*sqrt\(exp\(0.156-0.00137*top.genpartonTop1.Pt\(\)\)*exp\(0.156-0.00137*top.genpartonTop2.Pt\(\)\)\)")
    ;(bTagSFUp,     "weight.combinedWeight/weight.bTagWeight*weight.bTagWeight_bTagSFUp")
    ;(bTagSFDown,   "weight.combinedWeight/weight.bTagWeight*weight.bTagWeight_bTagSFDown")
    ;(misTagSFUp,   "weight.combinedWeight/weight.bTagWeight*weight.bTagWeight_misTagSFUp")
    ;(misTagSFDown, "weight.combinedWeight/weight.bTagWeight*weight.bTagWeight_misTagSFDown")
    ;(noLeptonSF,   "weight.combinedWeight/weight.triggerWeight")
    
WEIGHT type = lines
LEPTON  = muon
;JSFSIGMA = 0.00312 0.00104 0.007
;SCALEID = 0 1 2 3 4 5 6 7 8 ; alpha_s variation
;SCALEID = 9 108 109 110 111 166 ; pdf variation
INPUT = 
	TopMassTreeSpring16_80X_new_sel_SignalMC_Muon_newPU_3ChecknoHLTPU_161016
	;2016B_JESVariations_ICHEPdata/TT_TuneCUETP8M1_13TeV_powheg_pythia8_Spring16_PUsys_MS1725_1.00
	;2016B_JESVariations_ICHEPdata/TT_TuneCUETP8M1_13TeV_powheg_pythia8_Spring16_all_weights_MS1725_1.00
	

[local]
wms = SGE

[SGE]
site = hh
