#include "tdrstyle.C"

void doubles_hitFitTtSemiLepEvent_MT_TOP_0Muo() {
  setTDRStyle();
  gStyle->SetPadLeftMargin(0.2);
  gStyle->SetPadRightMargin(0.05);
  gStyle->SetNdivisions(505, "X");
  gStyle->SetTitleYOffset(2.);
  gStyle->SetOptStat(0);

  enum samples    {kSigCP, kSigWP, kSigUN,  kSig  , kUp     , kDown  , kZjets  , kWjets  , kQCD   , kSTop   , kDiBos, kData , kWW, kWZ, kZZ, kSAntiTops, kSAntiTopt, kSAntiToptW, kSTops  , kSTopt  , kSToptW };
  int color_ [] = {kRed+1, kRed-7, kRed-10, kGray , kGreen+1, kRed+1 , kAzure-2, kGreen-3, kYellow, kMagenta, 10    , kBlack, 10 , 10 , 10 , kMagenta  , kMagenta  , kMagenta   , kMagenta, kMagenta, kMagenta};
  int marker_[] = {20,     22,     22,      20,     22      , 23     , 29      , 23      , 21     , 27      , 28    , 20    , 28 , 28 , 28 , 27        , 27        , 27         , 27      , 27      , 27      };

   TCanvas *c = new TCanvas("doubles_hitFitTtSemiLepEvent_MT_TOP_0Muo", "doubles_hitFitTtSemiLepEvent_MT_TOP_0Muo",0,0,600,600);
   gStyle->SetOptStat(0);
   c->Range(23.48837,-1274.052,488.6047,11466.46);
   c->SetFillColor(0);
   c->SetBorderMode(0);
   c->SetBorderSize(2);
   c->SetRightMargin(0.04);
   c->SetTopMargin(0.05);
   c->SetFrameBorderMode(0);
   c->SetFrameBorderMode(0);
   
   THStack *hs = new THStack();
   hs->SetName("hs");
   hs->SetTitle("");
   hs->SetMaximum(10313.75);
   
   TH1F *hs1__1 = new TH1F("hs1__1","",20,70,470);
   hs1__1->SetMinimum(0);
   hs1__1->SetMaximum(10829.44);
   hs1__1->SetDirectory(0);
   hs1__1->SetStats(0);
   hs1__1->GetXaxis()->SetTitle("Best Fitted Top Mass [GeV]");
   hs1__1->GetXaxis()->SetTitleSize(0.05);
   hs1__1->GetYaxis()->SetTitle("Number of Events / 20 GeV");
   hs1__1->GetYaxis()->SetNdivisions(505);
   hs1__1->GetYaxis()->SetTitleSize(0.05);
   hs->SetHistogram(hs1__1);
   
   
   TH1F *h_qcd = new TH1F("h_qcd","h_qcd",20,70,470);
   h_qcd->SetBinContent(2,27.2559);
   h_qcd->SetBinContent(3,60.48661);
   h_qcd->SetBinContent(4,124.0205);
   h_qcd->SetBinContent(5,183.6594);
   h_qcd->SetBinContent(6,201.8499);
   h_qcd->SetBinContent(7,79.68308);
   h_qcd->SetBinContent(8,50.9338);
   h_qcd->SetBinContent(9,155.1787);
   h_qcd->SetBinContent(10,45.83659);
   h_qcd->SetBinContent(11,23.6779);
   h_qcd->SetBinContent(12,48.8569);
   h_qcd->SetBinContent(13,53.0615);
   h_qcd->SetBinContent(15,48.74173);
   h_qcd->SetBinContent(18,25.88008);
   h_qcd->SetBinContent(19,8.509316);
   h_qcd->SetBinContent(20,28.01456);
   h_qcd->SetBinContent(21,28.01456);
   h_qcd->SetBinError(2,22.79697);
   h_qcd->SetBinError(3,33.96068);
   h_qcd->SetBinError(4,48.6288);
   h_qcd->SetBinError(5,59.17706);
   h_qcd->SetBinError(6,62.03847);
   h_qcd->SetBinError(7,38.97893);
   h_qcd->SetBinError(8,31.16376);
   h_qcd->SetBinError(9,54.39548);
   h_qcd->SetBinError(10,29.5633);
   h_qcd->SetBinError(11,21.24802);
   h_qcd->SetBinError(12,30.52177);
   h_qcd->SetBinError(13,31.80801);
   h_qcd->SetBinError(15,30.48578);
   h_qcd->SetBinError(18,22.21415);
   h_qcd->SetBinError(19,12.73779);
   h_qcd->SetBinError(20,23.11206);
   h_qcd->SetBinError(21,23.11206);
   h_qcd->SetEntries(59);
   h_qcd->SetStats(0);

   h_qcd->SetFillColor(color_[kQCD]);
   
   TH1F *h_zjets = new TH1F("h_zjets","h_zjets",20,70,470);
   h_zjets->SetBinContent(2,8.275507);
   h_zjets->SetBinContent(3,66.05486);
   h_zjets->SetBinContent(4,266.9533);
   h_zjets->SetBinContent(5,271.7509);
   h_zjets->SetBinContent(6,285.2526);
   h_zjets->SetBinContent(7,216.9896);
   h_zjets->SetBinContent(8,178.1259);
   h_zjets->SetBinContent(9,154.4758);
   h_zjets->SetBinContent(10,92.7599);
   h_zjets->SetBinContent(11,100.6314);
   h_zjets->SetBinContent(12,63.05412);
   h_zjets->SetBinContent(13,47.68106);
   h_zjets->SetBinContent(14,32.3268);
   h_zjets->SetBinContent(15,27.01055);
   h_zjets->SetBinContent(16,28.69098);
   h_zjets->SetBinContent(17,19.21409);
   h_zjets->SetBinContent(18,12.30861);
   h_zjets->SetBinContent(19,10.73849);
   h_zjets->SetBinContent(20,60.89782);
   h_zjets->SetBinContent(21,48.84528);
   h_zjets->SetBinError(2,2.770824);
   h_zjets->SetBinError(3,7.828237);
   h_zjets->SetBinError(4,15.73726);
   h_zjets->SetBinError(5,15.87805);
   h_zjets->SetBinError(6,16.26771);
   h_zjets->SetBinError(7,14.18832);
   h_zjets->SetBinError(8,12.85509);
   h_zjets->SetBinError(9,11.97132);
   h_zjets->SetBinError(10,9.276662);
   h_zjets->SetBinError(11,9.662254);
   h_zjets->SetBinError(12,7.64836);
   h_zjets->SetBinError(13,6.650963);
   h_zjets->SetBinError(14,5.476372);
   h_zjets->SetBinError(15,5.005856);
   h_zjets->SetBinError(16,5.159223);
   h_zjets->SetBinError(17,4.222032);
   h_zjets->SetBinError(18,3.379217);
   h_zjets->SetBinError(19,3.156336);
   h_zjets->SetBinError(20,7.516444);
   h_zjets->SetBinError(21,6.731671);
   h_zjets->SetEntries(1993);
   h_zjets->SetStats(0);

   h_zjets->SetFillColor(color_[kZjets]);
   
   TH1F *h_top_tw = new TH1F("h_top_tw","h_top_tw",20,70,470);
   h_top_tw->SetBinContent(0,0.5594443);
   h_top_tw->SetBinContent(1,0.5594443);
   h_top_tw->SetBinContent(2,2.844413);
   h_top_tw->SetBinContent(3,30.95164);
   h_top_tw->SetBinContent(4,139.8155);
   h_top_tw->SetBinContent(5,227.8459);
   h_top_tw->SetBinContent(6,241.2051);
   h_top_tw->SetBinContent(7,183.9576);
   h_top_tw->SetBinContent(8,144.2984);
   h_top_tw->SetBinContent(9,114.9506);
   h_top_tw->SetBinContent(10,83.4785);
   h_top_tw->SetBinContent(11,66.17814);
   h_top_tw->SetBinContent(12,55.56311);
   h_top_tw->SetBinContent(13,40.73063);
   h_top_tw->SetBinContent(14,31.16833);
   h_top_tw->SetBinContent(15,24.67226);
   h_top_tw->SetBinContent(16,18.42205);
   h_top_tw->SetBinContent(17,14.66106);
   h_top_tw->SetBinContent(18,8.895552);
   h_top_tw->SetBinContent(19,6.65254);
   h_top_tw->SetBinContent(20,27.7019);
   h_top_tw->SetBinContent(21,21.30191);
   h_top_tw->SetBinError(0,0.158544);
   h_top_tw->SetBinError(1,0.158544);
   h_top_tw->SetBinError(2,0.3633244);
   h_top_tw->SetBinError(3,1.196275);
   h_top_tw->SetBinError(4,2.544631);
   h_top_tw->SetBinError(5,3.244253);
   h_top_tw->SetBinError(6,3.333955);
   h_top_tw->SetBinError(7,2.922247);
   h_top_tw->SetBinError(8,2.590217);
   h_top_tw->SetBinError(9,2.314581);
   h_top_tw->SetBinError(10,1.972756);
   h_top_tw->SetBinError(11,1.755145);
   h_top_tw->SetBinError(12,1.609486);
   h_top_tw->SetBinError(13,1.377553);
   h_top_tw->SetBinError(14,1.206962);
   h_top_tw->SetBinError(15,1.075642);
   h_top_tw->SetBinError(16,0.9275587);
   h_top_tw->SetBinError(17,0.8281659);
   h_top_tw->SetBinError(18,0.642883);
   h_top_tw->SetBinError(19,0.5537475);
   h_top_tw->SetBinError(20,1.13251);
   h_top_tw->SetBinError(21,0.9915682);
   h_top_tw->SetEntries(31571);
   h_top_tw->SetStats(0);

   h_top_tw->SetFillColor(color_[kSTop]);
   
   TH1F *h_wjets = new TH1F("h_wjets","h_wjets",20,70,470);
   h_wjets->SetBinContent(0,19.89271);
   h_wjets->SetBinContent(1,19.89271);
   h_wjets->SetBinContent(2,56.35256);
   h_wjets->SetBinContent(3,452.5102);
   h_wjets->SetBinContent(4,1582.698);
   h_wjets->SetBinContent(5,1958.916);
   h_wjets->SetBinContent(6,1695.795);
   h_wjets->SetBinContent(7,1525.638);
   h_wjets->SetBinContent(8,1389.984);
   h_wjets->SetBinContent(9,1091.077);
   h_wjets->SetBinContent(10,851.689);
   h_wjets->SetBinContent(11,930.6791);
   h_wjets->SetBinContent(12,666.94);
   h_wjets->SetBinContent(13,438.954);
   h_wjets->SetBinContent(14,340.0726);
   h_wjets->SetBinContent(15,331.924);
   h_wjets->SetBinContent(16,288.164);
   h_wjets->SetBinContent(17,145.5231);
   h_wjets->SetBinContent(18,183.2547);
   h_wjets->SetBinContent(19,95.14809);
   h_wjets->SetBinContent(20,454.5307);
   h_wjets->SetBinContent(21,370.6493);
   h_wjets->SetBinError(0,11.9248);
   h_wjets->SetBinError(1,11.9248);
   h_wjets->SetBinError(2,20.07062);
   h_wjets->SetBinError(3,56.87458);
   h_wjets->SetBinError(4,106.366);
   h_wjets->SetBinError(5,118.3346);
   h_wjets->SetBinError(6,110.1009);
   h_wjets->SetBinError(7,104.4311);
   h_wjets->SetBinError(8,99.68021);
   h_wjets->SetBinError(9,88.31443);
   h_wjets->SetBinError(10,78.02693);
   h_wjets->SetBinError(11,81.56503);
   h_wjets->SetBinError(12,69.04741);
   h_wjets->SetBinError(13,56.01619);
   h_wjets->SetBinError(14,49.30487);
   h_wjets->SetBinError(15,48.71058);
   h_wjets->SetBinError(16,45.3862);
   h_wjets->SetBinError(17,32.25299);
   h_wjets->SetBinError(18,36.19358);
   h_wjets->SetBinError(19,26.07979);
   h_wjets->SetBinError(20,57.00141);
   h_wjets->SetBinError(21,51.47373);
   h_wjets->SetEntries(1994);
   h_wjets->SetStats(0);

   h_wjets->SetFillColor(color_[kWjets]);
   
   TH1F *h_tt = new TH1F("h_tt","h_tt",20,70,470);
   h_tt->SetBinContent(0,0.7713376);
   h_tt->SetBinContent(1,0.7713376);
   h_tt->SetBinContent(2,46.21026);
   h_tt->SetBinContent(3,376.6577);
   h_tt->SetBinContent(4,2219.094);
   h_tt->SetBinContent(5,5510.913);
   h_tt->SetBinContent(6,5714.996);
   h_tt->SetBinContent(7,3082.806);
   h_tt->SetBinContent(8,2177.422);
   h_tt->SetBinContent(9,1630.031);
   h_tt->SetBinContent(10,1242.769);
   h_tt->SetBinContent(11,904.0353);
   h_tt->SetBinContent(12,670.057);
   h_tt->SetBinContent(13,512.577);
   h_tt->SetBinContent(14,391.3638);
   h_tt->SetBinContent(15,275.4109);
   h_tt->SetBinContent(16,208.9864);
   h_tt->SetBinContent(17,149.0658);
   h_tt->SetBinContent(18,107.1985);
   h_tt->SetBinContent(19,86.38069);
   h_tt->SetBinContent(20,282.1209);
   h_tt->SetBinContent(21,222.0276);
   h_tt->SetBinError(0,0.3870768);
   h_tt->SetBinError(1,0.3870768);
   h_tt->SetBinError(2,2.996016);
   h_tt->SetBinError(3,8.553588);
   h_tt->SetBinError(4,20.76169);
   h_tt->SetBinError(5,32.718);
   h_tt->SetBinError(6,33.3183);
   h_tt->SetBinError(7,24.47079);
   h_tt->SetBinError(8,20.56583);
   h_tt->SetBinError(9,17.79397);
   h_tt->SetBinError(10,15.5371);
   h_tt->SetBinError(11,13.25158);
   h_tt->SetBinError(12,11.40856);
   h_tt->SetBinError(13,9.978252);
   h_tt->SetBinError(14,8.718971);
   h_tt->SetBinError(15,7.314177);
   h_tt->SetBinError(16,6.371386);
   h_tt->SetBinError(17,5.381011);
   h_tt->SetBinError(18,4.563198);
   h_tt->SetBinError(19,4.09622);
   h_tt->SetBinError(20,7.402741);
   h_tt->SetBinError(21,6.567172);
   h_tt->SetEntries(132175);
   h_tt->SetStats(0);

   h_tt->SetFillColor(color_[kSigCP]);
   
   hs->Add(h_top_tw,"");
   hs->Add(h_zjets,"");
   hs->Add(h_wjets,"");
   hs->Add(h_qcd,"");
   hs->Add(h_tt,"");
   hs->Draw("hist");
   
   TLatex *   tex = new TLatex(0.97,0.45,"Normalized to Data");
tex->SetNDC();
   tex->SetTextFont(42);
   tex->SetTextSize(0.04);
   tex->SetTextAngle(270);
   tex->SetLineWidth(2);
   tex->Draw();
   
   TH1F *h_data = new TH1F("h_data","h_data",20,70,470);
   h_data->SetBinContent(0,4);
   h_data->SetBinContent(1,4);
   h_data->SetBinContent(2,124);
   h_data->SetBinContent(3,1119);
   h_data->SetBinContent(4,4516);
   h_data->SetBinContent(5,8041);
   h_data->SetBinContent(6,8251);
   h_data->SetBinContent(7,5171);
   h_data->SetBinContent(8,3941);
   h_data->SetBinContent(9,3072);
   h_data->SetBinContent(10,2399);
   h_data->SetBinContent(11,1884);
   h_data->SetBinContent(12,1367);
   h_data->SetBinContent(13,1094);
   h_data->SetBinContent(14,843);
   h_data->SetBinContent(15,607);
   h_data->SetBinContent(16,511);
   h_data->SetBinContent(17,382);
   h_data->SetBinContent(18,316);
   h_data->SetBinContent(19,219);
   h_data->SetBinContent(20,801);
   h_data->SetBinContent(21,637);
   h_data->SetBinError(0,2);
   h_data->SetBinError(1,2);
   h_data->SetBinError(2,11.13553);
   h_data->SetBinError(3,33.45146);
   h_data->SetBinError(4,67.20119);
   h_data->SetBinError(5,89.67162);
   h_data->SetBinError(6,90.83502);
   h_data->SetBinError(7,71.90967);
   h_data->SetBinError(8,62.77738);
   h_data->SetBinError(9,55.42563);
   h_data->SetBinError(10,48.97959);
   h_data->SetBinError(11,43.40507);
   h_data->SetBinError(12,36.97296);
   h_data->SetBinError(13,33.07567);
   h_data->SetBinError(14,29.03446);
   h_data->SetBinError(15,24.63737);
   h_data->SetBinError(16,22.60531);
   h_data->SetBinError(17,19.54482);
   h_data->SetBinError(18,17.77639);
   h_data->SetBinError(19,14.79865);
   h_data->SetBinError(20,28.30194);
   h_data->SetBinError(21,25.23886);
   h_data->SetEntries(44664);
   h_data->SetStats(0);
   h_data->SetMarkerStyle(20);
   h_data->GetYaxis()->SetNdivisions(505);
   h_data->Draw("pesame");
   
   
   // ---
  //    create legend
  // ---
  
  TLegend *leg1 = new TLegend(0.6, 0.65, 0.9, 0.925);
  leg1->SetFillStyle(0);
  leg1->SetBorderSize(0);
  leg1->AddEntry( h_tt, "t#bar{t}", "F" );
  leg1->AddEntry( h_qcd, "QCD", "F" );
  leg1->AddEntry( h_wjets, "W#rightarrowl#nu", "F" );
  leg1->AddEntry( h_zjets, "Z+jets", "F" );
  leg1->AddEntry( h_top_tw, "single top", "F" );
  leg1->AddEntry( h_data, "Data (4.7 fb ^{-1})", "PL");

  TPaveText *pt = new TPaveText(0.6, 0.7, 0.9, 0.75, "NDC");
  pt->SetBorderSize(0);
  pt->SetFillColor(kBlack);
  pt->SetTextColor(kWhite);
  pt->AddText("Work in progress");
  
  leg1->Draw();
  DrawCMSPrel50();
}
